@model ESHOPPER.Models.BienTheSanPham

@{
    ViewBag.Title = "Xóa biến thể";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";

    // Lấy tên sản phẩm cha
    string parentName = ViewBag.TenSanPham ?? (Model.SanPham != null ? Model.SanPham.TenSanPham : "Sản phẩm gốc");
}

<div class="mb-6">
    <h2 class="text-2xl font-bold text-red-600">Xóa biến thể</h2>
    <p class="text-sm text-slate-500 mt-1">Xác nhận thông tin biến thể cần xóa khỏi hệ thống.</p>
</div>

<div class="max-w-3xl mx-auto">

    <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6">
        <strong class="font-bold">Cảnh báo:</strong>
        <span class="block sm:inline">
            Bạn đang thực hiện xóa biến thể <strong>#@Model.MaBienThe</strong> thuộc sản phẩm <strong>"@parentName"</strong>.
            Hành động này không thể hoàn tác và dữ liệu sẽ mất vĩnh viễn.
        </span>
    </div>

    <div class="bg-white border border-slate-200 rounded-lg shadow-sm overflow-hidden">
        <div class="p-6">
            <div class="flex flex-col md:flex-row gap-6">

                <div class="w-full md:w-1/3">
                    <div class="aspect-w-1 aspect-h-1 w-full bg-slate-100 border border-slate-200 rounded flex items-center justify-center h-48 overflow-hidden">
                        @if (!string.IsNullOrEmpty(Model.AnhBienThe))
                        {
                            <img src="@Url.Content("~/Content/Images/" + Model.AnhBienThe)" alt="Ảnh biến thể" class="h-full w-full object-contain p-2" />
                        }
                        else
                        {
                            <div class="flex flex-col items-center text-slate-400">
                                <span class="text-sm text-slate-400">Không có ảnh</span>
                            </div>
                        }
                    </div>
                    <div class="mt-2 text-center">
                        <span class="text-xs font-mono text-slate-500 bg-slate-100 px-2 py-1 rounded">ID: @Model.MaBienThe</span>
                    </div>
                </div>

                <div class="w-full md:w-2/3 space-y-4">
                    <div class="border-b border-slate-100 pb-4">
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Thuộc sản phẩm</label>
                        <h3 class="text-xl font-bold text-slate-800">@parentName</h3>
                    </div>

                    <div class="grid grid-cols-2 gap-y-4 gap-x-8">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Giá bán</label>
                            <span class="text-base font-bold text-blue-600">@string.Format("{0:N0} đ", Model.GiaBan)</span>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Trạng thái</label>
                            @if (Model.MaTrangThai == 1)
                            {
                                <span class="text-green-600 font-bold text-sm">Hiển thị</span>
                            }
                            else
                            {
                                <span class="text-slate-500 font-bold text-sm">Đang ẩn</span>
                            }
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Màu sắc</label>
                            <span class="text-sm text-slate-700">@(Model.MauSac != null ? Model.MauSac.TenMau : "---")</span>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Kích thước</label>
                            <span class="text-sm text-slate-700">@(Model.KichThuoc != null ? Model.KichThuoc.TenSize : "---")</span>
                        </div>
                    </div>

                    <div class="pt-2">
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Tồn kho</label>
                        <p class="text-sm text-slate-800 font-bold">
                            @Model.SoLuongTon <span class="font-normal text-slate-500">sản phẩm</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-slate-50 px-6 py-4 border-t border-slate-200 flex justify-end gap-3">
            <a href="@Url.Action("Index", "Product_Variants", new { id = Model.MaSP })" class="px-4 py-2 bg-white border border-slate-300 text-slate-700 text-sm font-medium rounded hover:bg-slate-50 transition-colors">
                Hủy bỏ
            </a>

            @using (Html.BeginForm("Delete", "Product_Variants", FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                @Html.HiddenFor(m => m.MaBienThe)
                <button type="submit" class="px-4 py-2 bg-red-600 text-white text-sm font-bold rounded hover:bg-red-700 transition-colors shadow-sm">
                    Xác nhận xóa
                </button>
            }
        </div>
    </div>
</div>